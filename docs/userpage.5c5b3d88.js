const e=document.querySelector("#postMessageButton"),t=document.querySelector("h1"),n=document.querySelector("#messageInputBox"),o=document.querySelector("#deleteAcc"),c=JSON.parse(localStorage.getItem("currentUser")),s=" https://socialmedia-588f1-default-rtdb.europe-west1.firebasedatabase.app/",a=`${s}userdata/${c.id}.json`,l=`${s}userdata.json`;function d(e){const t=e.posts??[],n=document.getElementById("post-container");n.innerHTML="";for(let e=0;e<t.length;e++){const o=document.createElement("h4");n.appendChild(o),o.innerText=t[e]}}!function(e){t.innerText=`Welcome ${e.username}`;const n=document.createElement("img");document.body.appendChild(n),n.src=e.img}(c),async function(){const e=await fetch(a),t=await e.json();t&&d(t)}(),e.addEventListener("click",(async function(e){e.preventDefault();const t=n.value;console.log(t);const o=await fetch(a),c=await o.json();c.posts?c.posts.push(t):c.posts=[t];const s={method:"PATCH",body:JSON.stringify(c),headers:{"Content-type":"application/json; charset=UTF-8"}},l=await fetch(a,s),i=await l.json();console.log(i),d(i)})),o.addEventListener("click",(()=>{fetch(a,{method:"DELETE"}).then((e=>console.log(e.status))).then(setTimeout((()=>{alert("Hope to see you here soon again"),localStorage.clear(),window.location.assign("index.html")}),5e3))})),async function(){const e=await fetch(l),t=await e.json();!function(e){const t=Object.values(e);for(let e=0;e<t.length;e++){const n=document.createElement("p");document.body.appendChild(n),n.innerText=t[e].username,n.addEventListener("click",(()=>{const n=document.getElementById("myModal"),o=document.getElementById("modal-container");o.innerHTML="";const c=document.createElement("h3");c.innerText="User "+t[e].username,o.appendChild(c);const s=document.createElement("img");o.appendChild(s),s.src=t[e].img;const a=t[e].posts[t[e].posts.length-1],l=document.createElement("h4");l.innerText="Latest post =  "+a,o.appendChild(l),n.style.display="block"}))}document.getElementsByClassName("close")[0].onclick=function(){document.getElementById("myModal").style.display="none"}}(t),console.log(t)}();
//# sourceMappingURL=userpage.5c5b3d88.js.map
