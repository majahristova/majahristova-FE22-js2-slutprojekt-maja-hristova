{"mappings":"AAAA,MACMA,EAAUC,yFAEVC,EAAeC,SAASC,cAAgC,mBACxDC,EAAmBF,SAASC,cAAgC,mBAC5DE,EAAWH,SAASC,cAAiC,gBACrDG,EAAmBJ,SAASC,cAAiC,wBAC7DI,EAAkBL,SAASC,cAAiC,0BAC5DK,EAAeN,SAASO,iBAAmC,gBAC3DC,EAA4BR,SAASC,cAA+B,kBAG1EI,EAAgBI,MAAMC,QAAU,OAChCF,EAA0BC,MAAMC,QAAU,OAG1CN,EAAiBO,iBAAiB,SAAUC,IACxCA,EAAMC,iBACNR,EAAgBI,MAAMC,QAAU,QAChCP,EAASM,MAAMC,QAAU,OACzBN,EAAiBK,MAAMC,QAAU,OACjCF,EAA0BC,MAAMC,QAAU,WAI9C,MAAMI,EAAuB,GAE7BR,EAAaS,SAASC,IAClBA,EAAOL,iBAAiB,SAAS,KAC7BG,EAAWG,QACXH,EAAWI,KAAKF,EAAOG,MAAK,GAChC,IAIJd,EAAgBM,iBAAiB,SACjCS,eAAiCR,GAC7BA,EAAMC,iBACN,MAAMQ,EAAgBtB,EAAaoB,MAC7BG,EAAgBpB,EAAiBiB,MAEjCI,EAAa,CACfC,SAAUH,EACVI,SAAUH,EACVI,IAAKZ,EAAW,IAGda,EAAO,CACTC,OAAQ,OACRC,KAAMC,KAAKC,UAAUR,GACrBS,QAAS,CACL,eAAgB,oCAIlBC,QAAoBC,MAAMrC,EAAS8B,SACdM,EAAYE,OACvCC,YAAW,KACPC,MAAM,WACNC,SAASC,KAAO,gBACd,IAEV,IAGApC,EAASQ,iBAAiB,SAC1BS,eAAiCR,GAC7BA,EAAMC,iBAEN,IACI,MAAM2B,QAAiBN,MAAMrC,IASrC,SAAyB4C,GACrB,MAAMC,EAAeC,OAAOC,KAAKH,GAC3BI,EAAeF,OAAOG,OAAOL,GAC7BpB,EAAgBtB,EAAaoB,MAC7BG,EAAgBpB,EAAiBiB,MACvC4B,QAAQC,WAAW3B,SAAsBC,GAEzC,IAAI2B,GAAY,EAEhB,IAAK,IAAIC,EAAI,EAAGA,EAAIL,EAAaM,OAAQD,IACrC,GAAI7B,GAAiBwB,EAAaK,GAAG1B,UAAYF,GAAiBuB,EAAaK,GAAGzB,SAAU,CACxF,MAAM2B,EAAW,IAAKP,EAAaK,GAAIG,GAAIX,EAAaQ,IACxDH,QAAQC,IAAII,GACZE,aAAaC,QAAQ,cAAezB,KAAKC,UAAUqB,IACnDd,SAASC,KAAO,iBAChBU,GAAY,CAChB,CAGCA,GACDZ,MAAM,iBAEd,CA7BQmB,OADmBhB,EAASL,OAEhC,CAAE,MAAOsB,GACLV,QAAQC,IAAIS,EAChB,CACJ","sources":["src/loginmain.ts"],"sourcesContent":["const url = `https://socialmedia-588f1-default-rtdb.europe-west1.firebasedatabase.app/`;\r\nconst baseurl = url + 'userdata.json';\r\n\r\nconst NameInputbox = document.querySelector<HTMLInputElement>('#typeInUserName');\r\nconst passwordInputbox = document.querySelector<HTMLInputElement>('#typeInPassWord');\r\nconst logInBtn = document.querySelector<HTMLButtonElement>('#logInButton');\r\nconst createAccountBtn = document.querySelector<HTMLButtonElement>('#createAccountButton');\r\nconst registerDoneBtn = document.querySelector<HTMLButtonElement>('#registerAccountButton');\r\nconst avatarInputs = document.querySelectorAll<HTMLInputElement>('input.avatar');\r\nconst chooseProfileImageSection = document.querySelector<HTMLBodyElement>('#image-section')\r\n\r\n// Style to some buttons\r\nregisterDoneBtn.style.display = 'none';\r\nchooseProfileImageSection.style.display = 'none'\r\n\r\n// Choosing to create a new account\r\ncreateAccountBtn.addEventListener('click', (event: MouseEvent) => {\r\n    event.preventDefault();\r\n    registerDoneBtn.style.display = 'block';\r\n    logInBtn.style.display = 'none';\r\n    createAccountBtn.style.display = 'none';\r\n    chooseProfileImageSection.style.display = 'block';\r\n});\r\n\r\n// Choosing Image for new account\r\nconst pickAvatar: string[] = [];\r\n\r\navatarInputs.forEach((avatar: HTMLInputElement) => {\r\n    avatar.addEventListener('click', () => {\r\n        pickAvatar.shift();\r\n        pickAvatar.push(avatar.value);\r\n    });\r\n});\r\n\r\n// Posting a new user account info to Firebase\r\nregisterDoneBtn.addEventListener('click', createAccountFunc);\r\nasync function createAccountFunc(event: MouseEvent) {\r\n    event.preventDefault();\r\n    const userNameInput = NameInputbox.value;\r\n    const passWordInput = passwordInputbox.value;\r\n\r\n    const newAccount = {\r\n        username: userNameInput,\r\n        password: passWordInput,\r\n        img: pickAvatar[0]\r\n    };\r\n\r\n    const init = {\r\n        method: 'POST',\r\n        body: JSON.stringify(newAccount),\r\n        headers: {\r\n            'Content-type': 'application/json; charset=UTF-8'\r\n        }\r\n    };\r\n\r\n    const responePost = await fetch(baseurl, init);\r\n    const dataFromPost = await responePost.json();\r\n    setTimeout(() => {\r\n        alert('Welcome')\r\n        location.href = \"/index.html\";\r\n       }, 5000);\r\n \r\n}\r\n\r\n// Checks if account exists\r\nlogInBtn.addEventListener('click', logInVerification);\r\nasync function logInVerification(event: MouseEvent) {\r\n    event.preventDefault();\r\n\r\n    try {\r\n        const response = await fetch(baseurl);\r\n        const data = await response.json();\r\n        verifyinProcess(data);\r\n    } catch (error) {\r\n        console.log(error);\r\n    }\r\n}\r\n\r\n// Verifying if the user exists and save to local storage with id\r\nfunction verifyinProcess(data: Record<string, any>) {\r\n    const keysFromData = Object.keys(data);\r\n    const listFromData = Object.values(data);\r\n    const userNameInput = NameInputbox.value;\r\n    const passWordInput = passwordInputbox.value;\r\n    console.log(typeof userNameInput, typeof passWordInput);\r\n\r\n    let userFound = false;\r\n\r\n    for (let i = 0; i < listFromData.length; i++) {\r\n        if (userNameInput == listFromData[i].username && passWordInput == listFromData[i].password) {\r\n            const userData = { ...listFromData[i], id: keysFromData[i] };\r\n            console.log(userData);\r\n            localStorage.setItem('currentUser', JSON.stringify(userData));\r\n            location.href = \"/userpage.html\";\r\n            userFound = true;\r\n        }\r\n    }\r\n\r\n    if (!userFound) {\r\n        alert('user not found');\r\n    }\r\n}\r\n"],"names":["$29e78d8e2265e5dd$var$baseurl","$29e78d8e2265e5dd$var$url","$29e78d8e2265e5dd$var$NameInputbox","document","querySelector","$29e78d8e2265e5dd$var$passwordInputbox","$29e78d8e2265e5dd$var$logInBtn","$29e78d8e2265e5dd$var$createAccountBtn","$29e78d8e2265e5dd$var$registerDoneBtn","$29e78d8e2265e5dd$var$avatarInputs","querySelectorAll","$29e78d8e2265e5dd$var$chooseProfileImageSection","style","display","addEventListener","event","preventDefault","$29e78d8e2265e5dd$var$pickAvatar","forEach","avatar","shift","push","value","async","userNameInput","passWordInput","newAccount","username","password","img","init","method","body","JSON","stringify","headers","responePost","fetch","json","setTimeout","alert","location","href","response","data","keysFromData","Object","keys","listFromData","values","console","log","userFound","i","length","userData","id","localStorage","setItem","$29e78d8e2265e5dd$var$verifyinProcess","error"],"version":3,"file":"index.75c37bd2.js.map"}